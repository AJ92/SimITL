# Betaflight sources for cmake


set(BETAFLIGHT_SOURCES
    drivers/accgyro/accgyro_fake.c 
    drivers/compass/compass_fake.c 
    drivers/barometer/barometer_fake.c 
    drivers/serial_tcp.c 
    build/build_config.c 
    build/version.c 
    pg/motor.c 
    target/SITL/target.c 
    build/debug.c 
    build/debug_pin.c 
    pg/rcdevice.c 
    target/SITL/udplink.c 
    main.c 
    pg/bus_i2c.c 
    pg/vtx_table.c 
    pg/sdio.c 
    pg/dyn_notch.c 
    pg/beeper_dev.c 
    pg/pg.c 
    pg/sdcard.c 
    pg/gyrodev.c 
    pg/rx_spi_expresslrs.c 
    pg/max7456.c 
    pg/rx_spi.c 
    pg/displayport_profiles.c 
    pg/piniobox.c 
    pg/rx_pwm.c 
    pg/timerio.c 
    pg/scheduler.c 
    pg/bus_quadspi.c 
    pg/board.c 
    pg/gps.c 
    pg/timerup.c 
    pg/vcd.c 
    pg/bus_spi.c 
    pg/rpm_filter.c 
    pg/rx_spi_cc2500.c 
    common/crc.c 
    pg/stats.c 
    pg/vtx_io.c 
    common/typeconversion.c 
    common/time.c 
    pg/rx.c 
    pg/serial_uart.c 
    pg/pin_pull_up_down.c 
    pg/pinio.c 
    pg/adc.c 
    pg/mco.c 
    common/encoding.c 
    pg/msp.c 
    pg/beeper.c 
    common/string_light.c 
    config/feature.c 
    common/bitarray.c 
    common/uvarint.c 
    common/printf_serial.c 
    config/config.c 
    common/strtol.c 
    common/huffman.c 
    common/explog_approx.c 
    common/gps_conversion.c 
    common/sensor_alignment.c 
    common/filter.c 
    drivers/display_canvas.c 
    common/maths.c 
    drivers/buttons.c 
    cli/cli.c 
    drivers/buf_writer.c 
    common/streambuf.c 
    pg/dashboard.c 
    pg/usb.c 
    drivers/dma_common.c 
    config/config_eeprom.c 
    common/huffman_table.c 
    drivers/bus.c 
    drivers/dshot_command.c 
    drivers/dshot_dpwm.c 
    drivers/bus_i2c_busdev.c 
    drivers/bus_i2c_soft.c 
    drivers/bus_quadspi.c 
    config/simplified_tuning.c 
    common/printf.c 
    drivers/dshot.c 
    drivers/display.c 
    drivers/pinio.c 
    pg/flash.c 
    pg/gps_rescue.c 
    common/colorconversion.c 
    common/sdft.c 
    cli/settings.c 
    config/config_streamer.c 
    drivers/sound_beeper.c 
    drivers/serial.c 
    drivers/io.c 
    drivers/exti.c 
    fc/board_info.c 
    drivers/transponder_ir_erlt.c 
    drivers/light_led.c 
    drivers/pin_pull_up_down.c 
    drivers/transponder_ir_ilap.c 
    drivers/dma_reqmap.c 
    io/piniobox.c 
    io/beeper.c 
    fc/tasks.c 
    drivers/stack_check.c 
    fc/dispatch.c 
    fc/hardfaults.c 
    fc/stats.c 
    drivers/motor.c 
    drivers/mco.c 
    drivers/timer_common.c 
    io/smartaudio_protocol.c 
    io/serial.c 
    fc/runtime_config.c 
    io/usb_cdc_hid.c 
    io/transponder_ir.c 
    msp/msp.c 
    drivers/transponder_ir_arcitimer.c 
    drivers/resource.c 
    io/tramp_protocol.c 
    io/statusindicator.c 
    scheduler/scheduler.c 
    sensors/battery.c 
    msp/msp_box.c 
    io/usb_msc.c 
    sensors/adcinternal.c 
    msp/msp_serial.c 
    target/config_helper.c 
    sensors/voltage.c 
    sensors/current.c 
    fc/controlrate_profile.c 
    drivers/camera_control.c 
    fc/core.c 
    fc/rc_controls.c 
    fc/rc_modes.c 
    drivers/rx/rx_spi.c 
    drivers/rx/rx_pwm.c 
    drivers/accgyro/gyro_sync.c 
    flight/position.c 
    fc/rc_adjustments.c 
    drivers/pwm_esc_detect.c 
    fc/rc.c 
    drivers/serial_softserial.c 
    fc/init.c 
    flight/dyn_notch_filter.c 
    flight/failsafe.c 
    flight/gps_rescue.c 
    flight/imu.c 
    flight/mixer.c 
    flight/feedforward.c 
    flight/pid.c 
    flight/pid_init.c 
    io/serial_4way_stk500v2.c 
    flight/mixer_tricopter.c 
    rx/ibus.c 
    flight/mixer_init.c 
    io/serial_4way.c 
    flight/servos.c 
    flight/servos_tricopter.c 
    flight/rpm_filter.c 
    rx/msp.c 
    rx/frsky_crc.c 
    rx/pwm.c 
    rx/jetiexbus.c 
    io/serial_4way_avrootloader.c 
    rx/rx_spi.c 
    rx/rx_bind.c 
    rx/rx.c 
    rx/ghst.c 
    rx/sbus.c 
    rx/crsf.c 
    rx/sumd.c 
    rx/srxl2.c 
    rx/sbus_channels.c 
    rx/rx_spi_common.c 
    io/spektrum_vtx_control.c 
    rx/spektrum.c 
    io/spektrum_rssi.c 
    rx/fport.c 
    sensors/acceleration_init.c 
    rx/xbus.c 
    sensors/compass.c 
    blackbox/blackbox_io.c 
    sensors/initialisation.c 
    sensors/acceleration.c 
    cms/cms_menu_ledstrip.c 
    cms/cms_menu_gps_rescue.c 
    cms/cms_menu_imu.c 
    blackbox/blackbox.c 
    sensors/gyro_init.c 
    blackbox/blackbox_encoding.c 
    rx/msp_override.c 
    rx/sumh.c 
    cms/cms_menu_osd.c 
    cms/cms_menu_failsafe.c 
    cms/cms_menu_main.c 
    cms/cms_menu_saveexit.c 
    cms/cms_menu_firmware.c 
    cms/cms_menu_blackbox.c 
    cms/cms_menu_vtx_tramp.c 
    sensors/gyro.c 
    cms/cms_menu_misc.c 
    cms/cms_menu_vtx_common.c 
    cms/cms_menu_power.c 
    sensors/boardalignment.c 
    cms/cms_menu_vtx_rtc6705.c 
    cms/cms_menu_vtx_smartaudio.c 
    drivers/rangefinder/rangefinder_lidartf.c 
    io/displayport_srxl.c 
    io/displayport_crsf.c 
    io/displayport_hott.c 
    drivers/vtx_table.c 
    cms/cms.c 
    drivers/light_ws2811strip.c 
    io/dashboard.c 
    io/displayport_msp.c 
    io/displayport_max7456.c 
    drivers/vtx_common.c 
    drivers/rangefinder/rangefinder_hcsr04.c 
    io/displayport_frsky_osd.c 
    cms/cms_menu_persistent_stats.c 
    io/frsky_osd.c 
    telemetry/telemetry.c 
    sensors/rangefinder.c 
    sensors/barometer.c 
    io/rcdevice_cam.c 
    osd/osd_elements.c 
    io/rcdevice.c 
    io/gps.c 
    io/ledstrip.c 
    osd/osd_warnings.c 
    telemetry/frsky_hub.c 
    telemetry/mavlink.c 
    sensors/esc_sensor.c 
    telemetry/msp_shared.c 
    telemetry/ibus.c 
    telemetry/ltm.c 
    telemetry/smartport.c 
    io/pidaudio.c 
    telemetry/jetiexbus.c 
    telemetry/hott.c 
    osd/osd.c 
    telemetry/ibus_shared.c 
    io/vtx_tramp.c 
    io/vtx_rtc6705.c 
    io/vtx_smartaudio.c 
    io/vtx.c 
    io/vtx_msp.c 
    cms/cms_menu_vtx_msp.c 
    io/vtx_control.c  
)

list(TRANSFORM BETAFLIGHT_SOURCES PREPEND 
    "${CMAKE_CURRENT_SOURCE_DIR}/betaflight/src/main/")

set(BETAFLIGHT_SOURCES ${BETAFLIGHT_SOURCES} 
    "${CMAKE_CURRENT_SOURCE_DIR}/betaflight/lib/main/dyad/dyad.c"
    "${CMAKE_CURRENT_SOURCE_DIR}/betaflight/lib/main/google/olc/olc.c"
)

file(GLOB BETAFLIGHT_G_SOURCES 
    "${CMAKE_CURRENT_SOURCE_DIR}/betaflight/src/main/pg/*.c"
    "${CMAKE_CURRENT_SOURCE_DIR}/betaflight/src/main/common/*.c"
    "${CMAKE_CURRENT_SOURCE_DIR}/betaflight/src/main/config/*.c"
    "${CMAKE_CURRENT_SOURCE_DIR}/src/*.c"
    "${CMAKE_CURRENT_SOURCE_DIR}/drivers/*.c"
    "${CMAKE_CURRENT_SOURCE_DIR}/io/*.c"
)

list(REMOVE_ITEM BETAFLIGHT_G_SOURCES 
    "${CMAKE_CURRENT_SOURCE_DIR}/betaflight/src/main/common/string_light.c")

set(BETAFLIGHT_SOURCES 
    ${BETAFLIGHT_SOURCES} ${BETAFLIGHT_G_SOURCES}
    PARENT_SCOPE)
